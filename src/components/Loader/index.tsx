import React from "react";

interface LoaderProps {
  size?: "small" | "medium" | "large";
  color?: string;
  className?: string;
  text?: string;
}

const IconTruck = ({ className, color }: { className?: string; color?: string }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      xmlSpace="preserve"
      viewBox="0 0 8.642 5"
      className={className}
    >
      <path
        d="M82.365 346.075v-11.476h344.999v11.476z"
        style={{
          fill: "#2a3133",
          fillOpacity: 1,
          strokeWidth: 21.8934,
        }}
        transform="matrix(-.01201 0 0 .0297 7.709 -6.803)"
      />
      <path
        d="M1238.341-524.453h1.447v4.338h-1.447z"
        style={{
          fill: "#3bafda",
          strokeWidth: 1,
        }}
        transform="matrix(-.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1235.716-527.309a.714.714 0 0 1 .663-.051l6.133 2.658h14.476c.22 0 .428.102.559.274a.666.666 0 0 1 .109.601l-1.935 7.24.561.743a.669.669 0 0 1-.155.55.704.704 0 0 1-.532.24h-19.499s-.697-.304-.697-.68v-11.005c0-.23.12-.444.317-.57z"
        style={{
          fill: color || "#fac34c",
          fillOpacity: 1,
          strokeWidth: 0.999999,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        fill="none"
        d="m-1215.788-515.116.584 2.847a.745.745 0 0 1-.162.597.72.72 0 0 1-.552.26l-20.982-.003v-3.701z"
        style={{
          fill: "#000",
          fillOpacity: 0,
          strokeWidth: 1,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1237.652-525.653h-4.589c-.673 0-.943.623-1.22 1.238l-2.089 4.64c-.11.243-.16.48-.151.749l.143 5.195h1.7a4.109 4.109 0 0 1 3.369-1.768 4.11 4.11 0 0 1 3.368 1.768h.699v-10.584a1.23 1.23 0 0 0-1.221-1.238h-.01z"
        style={{
          fill: color || "#fac34c",
          fillOpacity: 1,
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1239.277-524.28h-2.846c-.43 0-.707.345-.858.698l-1.55 3.604c-.151.354.084.808.514.808h4.74c.43 0 .775-.311.775-.699v-3.713c0-.387-.354-.699-.775-.699z"
        style={{
          fill: "#233239",
          fillOpacity: 1,
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1239.117-523.876h-2.846c-.43 0-.707.345-.859.698l-1.549 3.604a.6.6 0 0 0-.05.244.607.607 0 0 1-.119-.648l1.55-3.604c.151-.353.429-.699.858-.699h2.846c.421 0 .758.304.775.674a.823.823 0 0 0-.615-.27z"
        style={{
          fill: "#000",
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <g
        style={{
          fill: "#2a3133",
          fillOpacity: 1,
          strokeWidth: 22.1886,
        }}
      >
        <path
          d="M82.365 334.599h344.999v11.476H82.365z"
          style={{
            fill: "#2a3133",
            fillOpacity: 1,
            strokeWidth: 22.1886,
          }}
          transform="matrix(-.01864 0 0 .01864 8.333 -2.838)"
        />
        <path
          d="M365.68 307.583c25.343 0 46.861 16.019 54.99 38.493H310.571c8.248-22.474 29.766-38.493 54.989-38.493z"
          style={{
            fill: "#2a3133",
            fillOpacity: 1,
            strokeWidth: 22.1886,
          }}
          transform="matrix(-.01864 0 0 .01864 8.333 -2.838)"
        />
      </g>
      <path
        d="M-1244.793-515.568h-.985a.636.636 0 0 0-.631.631v1.533c0 .345.286.631.631.631h.985z"
        style={{
          fill: "#2a3133",
          fillOpacity: 1,
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1240.521-515.758a3.618 3.618 0 1 1 0 7.236 3.618 3.618 0 0 1 0-7.236z"
        style={{
          fill: "#495259",
          fillOpacity: 1,
          strokeWidth: 1,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1238.63-512.14a1.892 1.892 0 0 1-3.782 0 1.89 1.89 0 0 1 1.89-1.889 1.89 1.89 0 0 1 1.892 1.888z"
        style={{
          fill: color || "#fac34c",
          fillOpacity: 1,
          strokeWidth: 0.999999,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1227.857-515.758a3.618 3.618 0 1 1 0 7.236 3.618 3.618 0 0 1 0-7.236z"
        style={{
          fill: "#495259",
          fillOpacity: 1,
          strokeWidth: 1,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1225.966-512.14a1.892 1.892 0 0 1-3.782 0 1.89 1.89 0 0 1 1.89-1.889 1.89 1.89 0 0 1 1.892 1.888z"
        style={{
          fill: color || "#fac34c",
          fillOpacity: 1,
          strokeWidth: 0.999999,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1220.62-515.758a3.618 3.618 0 1 1 0 7.236 3.618 3.618 0 0 1 0-7.236z"
        style={{
          fill: "#495259",
          fillOpacity: 1,
          strokeWidth: 1,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1218.729-512.14a1.892 1.892 0 0 1-3.782 0 1.89 1.89 0 0 1 1.891-1.889 1.89 1.89 0 0 1 1.891 1.888z"
        style={{
          fill: color || "#fac34c",
          fillOpacity: 1,
          strokeWidth: 0.999999,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1232.68-514.335h-3.05c-.294 0-.53.32-.53.698v1.045c0 .387.242.698.53.698h3.05c.293 0 .53-.32.53-.698v-1.045c0-.387-.243-.698-.53-.698z"
        style={{
          fill: "#2a3133",
          fillOpacity: 1,
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
      <path
        d="M-1219.777-523.123v6.524c0 .206 3.175.206 3.175 0v-6.524c0-.206-3.175-.206-3.175 0zm-15.265 0v6.524c0 .206 3.175.206 3.175 0v-6.524c0-.206-3.175-.206-3.175 0zm3.816 0v6.524c0 .206 3.175.206 3.175 0v-6.524c0-.206-3.175-.206-3.175 0zm3.816 0v6.524c0 .206 3.175.206 3.175 0v-6.524c0-.206-3.175-.206-3.175 0zm3.816 0v6.524c0 .206 3.175.206 3.175 0v-6.524c0-.206-3.175-.206-3.175 0z"
        style={{
          opacity: 0.1,
          fill: "#000",
          strokeWidth: 1.56287,
        }}
        transform="matrix(.26458 0 0 .26458 329.78 139.546)"
      />
    </svg>
  );
};

const Loader: React.FC<LoaderProps> = ({ 
  size = "medium", 
  color = "#fac34c", 
  className = "", 
  text = "Cargando..." 
}) => {
  const sizeClasses = {
    small: "w-8 h-8",
    medium: "w-12 h-12",
    large: "w-16 h-16"
  };

  const textSizeClasses = {
    small: "text-sm",
    medium: "text-base",
    large: "text-lg"
  };

  return (
    <div className={`flex flex-col items-center justify-center space-y-3 ${className}`}>
      {/* Camión con animaciones */}
      <div className="relative">
        <div 
          className={`${sizeClasses[size]} animate-bounce`}
          style={{
            animation: 'bounce 1s infinite'
          }}
        >
          <div
            className="w-full h-full"
            style={{
              animation: 'truck-sway 2s ease-in-out infinite alternate'
            }}
          >
            <IconTruck 
              className="w-full h-full drop-shadow-md" 
              color={color}
            />
          </div>
        </div>
        
        {/* Líneas de velocidad animadas */}
        <div className="absolute -left-4 top-1/2 transform -translate-y-1/2">
          <div className="flex space-x-1">
            <div 
              className="w-2 h-0.5 bg-gray-400 opacity-70"
              style={{
                animation: 'speed-line-1 1.5s ease-in-out infinite'
              }}
            ></div>
            <div 
              className="w-1 h-0.5 bg-gray-400 opacity-50"
              style={{
                animation: 'speed-line-2 1.5s ease-in-out infinite 0.1s'
              }}
            ></div>
            <div 
              className="w-0.5 h-0.5 bg-gray-400 opacity-30"
              style={{
                animation: 'speed-line-3 1.5s ease-in-out infinite 0.2s'
              }}
            ></div>
          </div>
        </div>
      </div>

      {/* Texto de carga */}
      <div className={`${textSizeClasses[size]} font-medium text-gray-600 animate-pulse`}>
        {text}
      </div>

      {/* Barra de progreso infinita */}
      <div className="w-20 h-1 bg-gray-200 rounded-full overflow-hidden">
        <div 
          className="h-full rounded-full"
          style={{
            background: `linear-gradient(90deg, ${color}, ${color}aa)`,
            animation: 'progress-bar 2s ease-in-out infinite'
          }}
        ></div>
      </div>

      {/* CSS Animations */}
      <style dangerouslySetInnerHTML={{
        __html: `
          @keyframes truck-sway {
            0% { transform: translateX(-2px) rotate(-1deg); }
            50% { transform: translateX(0px) rotate(0deg); }
            100% { transform: translateX(2px) rotate(1deg); }
          }

          @keyframes speed-line-1 {
            0% { opacity: 0; transform: translateX(0px); }
            50% { opacity: 0.7; transform: translateX(-3px); }
            100% { opacity: 0; transform: translateX(-6px); }
          }

          @keyframes speed-line-2 {
            0% { opacity: 0; transform: translateX(0px); }
            50% { opacity: 0.5; transform: translateX(-4px); }
            100% { opacity: 0; transform: translateX(-8px); }
          }

          @keyframes speed-line-3 {
            0% { opacity: 0; transform: translateX(0px); }
            50% { opacity: 0.3; transform: translateX(-5px); }
            100% { opacity: 0; transform: translateX(-10px); }
          }

          @keyframes progress-bar {
            0% { transform: translateX(-100%); }
            50% { transform: translateX(0%); }
            100% { transform: translateX(100%); }
          }
        `
      }} />
    </div>
  );
};

export default Loader;